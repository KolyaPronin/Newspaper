# Newspaper é¡¹ç›®ä¸­æ–‡è¯´æ˜ï¼ˆå†…éƒ¨èµ„æ–™ï¼‰

> æœ¬æ–‡æ¡£ä»…ä¾›å½“å‰åä½œä½¿ç”¨ï¼Œä¸éœ€è¦æ¨é€è‡³ GitHub ä»“åº“ã€‚

## 1. é¡¹ç›®æ¦‚è§ˆ

- **ç›®æ ‡**ï¼šæ„å»ºä¸€ä¸ªæ¶µç›–æ–°é—»é‡‡ç¼–ã€æ ¡å¯¹ã€ç‰ˆé¢è®¾è®¡ã€æ’ç”»ä¸å¹¿å‘ŠæŠ•æ”¾çš„å¤šè§’è‰²ååŒç³»ç»Ÿã€‚
- **ç»“æ„**ï¼š
  - `newspaper/`ï¼šReact + TypeScript å‰ç«¯ï¼Œä½¿ç”¨ TipTap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸æœ¬åœ°ä¸Šä¸‹æ–‡çŠ¶æ€ã€‚
  - `newspaper_backend/`ï¼šExpress + MongoDB åç«¯ï¼Œæä¾›æ–‡ç« ã€æ¨¡æ¿ã€æ’ç‰ˆã€æ’ç”»ç­‰ REST APIã€‚
  - `Vision.pdf`ã€`usecase.txt`ï¼šéœ€æ±‚ä¸ç”¨ä¾‹æè¿°ã€‚

## 2. æŠ€æœ¯æ ˆ

| æ¨¡å— | æŠ€æœ¯ |
| --- | --- |
| å‰ç«¯ | React 18ã€TypeScriptã€TipTapã€Context APIã€æœ¬åœ° `localStorage` |
| åç«¯ | Node.jsã€Express 5ã€Mongooseã€JWTã€Multerã€dotenvã€Nodemon |
| å·¥å…· | npmã€Scriptsï¼ˆinitUsers / initTemplatesï¼‰ã€å¯Œæ–‡æœ¬æ‰©å±•ã€æ‹–æ‹½ API |

## 3. å·²å®ŒæˆåŠŸèƒ½

1. **è®¤è¯å£³å±‚**ï¼šå‰ç«¯ `AuthProvider` æ”¯æŒç™»å½•/ç™»å‡ºä¸è§’è‰²åˆ‡æ¢ï¼Œ`LoginForm` å…è®¸ç›´æ¥é€‰æ‹©ä»»æ„è§’è‰²ï¼ˆæœªæ¥å…¥åç«¯ï¼‰ã€‚
2. **ä½œè€…å·¥ä½œå°**ï¼š
   - TipTap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼ã€é“¾æ¥ã€å›¾ç‰‡ç­‰ï¼‰ã€‚
   - è‰ç¨¿ä¿å­˜ã€æäº¤å®¡æ ¸ã€æŒ‰çŠ¶æ€åˆ†ç»„æ˜¾ç¤ºï¼ˆè‰ç¨¿/åœ¨å®¡/éœ€ä¿®æ”¹/å·²æ‰¹å‡†ï¼‰ã€‚
   - æ•°æ®å­˜å‚¨äºæµè§ˆå™¨ `localStorage`ã€‚
3. **æ ¡å¯¹å·¥ä½œå°**ï¼š
   - åˆ—å‡º `under_review` çŠ¶æ€çš„æ–‡ç« ã€‚
   - æ”¯æŒç¼–è¾‘å†…å®¹ã€é€€å›ï¼ˆneeds_revisionï¼‰ã€æ‰¹å‡†ï¼ˆapprovedï¼‰ã€‚
4. **ç‰ˆé¢è®¾è®¡å·¥ä½œå°**ï¼š
   - è¯»å– `defaultPageTemplate`ï¼Œå…è®¸å°†å·²æ‰¹å‡†æ–‡ç« æ‹–å…¥åˆ—å®¹å™¨ã€‚
   - ç®€å•çš„å†…å®¹åˆ†æ ç®—æ³•ã€æ’ç”»/å¹¿å‘Šå ä½ç¬¦ã€é¡µçœ‰ç¼–è¾‘ã€‚
5. **åç«¯ API æˆå¹´ä½“ç³»**ï¼š
   - ç”¨æˆ·ã€æ–‡ç« ã€æ¨¡æ¿ã€æ’ç‰ˆã€æ’ç”»æ¨¡å‹åŠå¯¹åº”æ§åˆ¶å™¨ã€è·¯ç”±ã€‚
   - JWT é‰´æƒã€è§’è‰²æƒé™æ§åˆ¶ã€ä¸­é—´ä»¶ï¼ˆè¯·æ±‚æ—¥å¿—ã€é”™è¯¯å¤„ç†ã€æ•°æ®åº“å¯ç”¨æ€§ã€æ–‡ä»¶ä¸Šä¼ ï¼‰ã€‚
   - Mongo åˆå§‹åŒ–è„šæœ¬ï¼ˆç”¨æˆ·ã€æ¨¡æ¿ï¼‰ã€‚
6. **å…¨é“¾è·¯åŒæ­¥**ï¼š
   - ç™»å½•è¡¨å•çœŸå®è°ƒç”¨ `/api/auth/login`ï¼Œä¸Šä¸‹æ–‡ä¿å­˜ JWTã€‚
   - `ArticleContext` ç›´æ¥é€šè¿‡ REST API æ‹‰å–å¹¶æ›´æ–°æ–‡ç« ï¼Œä½œè€…/æ ¡å¯¹æ“ä½œå®æ—¶è½åº“ã€‚

## 4. è¿‘æœŸé—®é¢˜ä¸å¤„ç†æƒ…å†µ

### âœ… å·²è§£å†³

| é—®é¢˜ | å¤„ç†ç»“æœ |
| --- | --- |
| å‰ç«¯è®¤è¯ | ç™»å½•è¡¨å•ç°å·²è°ƒç”¨åç«¯ `/api/auth/login`ï¼ŒåŸºäº JWT è·å–çœŸå®ç”¨æˆ·ä¸è§’è‰²ï¼›å‡­è¯æŒä¹…åŒ–åœ¨ `localStorage`ï¼Œä¸Šä¸‹æ–‡è‡ªåŠ¨æ¢å¤ã€‚ |
| æ•°æ®åŒæ­¥ | ä½œè€…ä¸æ ¡å¯¹çš„è‰ç¨¿ä¿å­˜ã€æäº¤ã€é€€å›ã€æ‰¹å‡†å‡é€šè¿‡ `ArticleContext` è°ƒç”¨åç«¯ REST APIï¼ŒåŒæ­¥å­˜å‚¨ MongoDBã€‚ |

#### ğŸ¬ åŠŸèƒ½ä½“éªŒç¤ºä¾‹
1. **ä½œè€…ç™»å½•å¹¶æäº¤ç¨¿ä»¶**
   - åœ¨ç™»å½•é¡µè¾“å…¥ `ivan@newspaper.zeta / password123`ï¼Œç‚¹å‡»â€œç™»å½•â€å³å¯è§¦å‘çœŸå® API è°ƒç”¨å¹¶è·å¾— JWTï¼Œåˆ·æ–°é¡µé¢ä»ä¿æŒç™»å½•æ€ã€‚
   - è¿›å…¥â€œæˆ‘çš„æ–‡ç« â€åç‚¹å‡»â€œ+ æ–°å»ºæ–‡ç« â€ï¼Œåœ¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å†…è¾“å…¥å†…å®¹ï¼Œç‚¹å‡»â€œä¿å­˜è‰ç¨¿â€å¯çœ‹åˆ°æŒ‰é’®æç¤ºâ€œâœ“ å·²ä¿å­˜â€ï¼Œå¹¶ä¸”åç«¯å¯åœ¨ MongoDB ä¸­çœ‹åˆ°è¯¥è‰ç¨¿ã€‚
   - ç‚¹å‡»â€œå‘é€å®¡æ ¸â€åï¼Œæ–‡ç« ç§»åŠ¨åˆ°â€œåœ¨å®¡æ ¸â€åˆ—ï¼Œæ•°æ®åº“è®°å½•çŠ¶æ€å˜ä¸º `under_review`ã€‚
2. **æ ¡å¯¹æŸ¥çœ‹å¹¶æ“ä½œåŒä¸€ç¨¿ä»¶**
   - é€€å‡ºç™»å½•ï¼Œç”¨ `maria@newspaper.zeta / password123` è¿›å…¥æ ¡å¯¹ç«¯ï¼Œå·¦ä¾§åˆ—è¡¨ç«‹å³å‡ºç°åˆšæ‰æäº¤çš„ç¨¿ä»¶ï¼ˆå› ä¸ºæ•°æ®æ¥æºäºåç«¯ï¼‰ã€‚
   - æ‰“å¼€ç¨¿ä»¶ï¼Œä¿®æ”¹å†…å®¹ç‚¹å‡»â€œä¿å­˜ä¿®æ”¹â€å³å¯å†æ¬¡å†™å›æ•°æ®åº“ï¼›ç‚¹å‡»â€œé€€å›ä½œè€…â€åï¼Œä½œè€…ç«¯åˆ·æ–°ä¼šçœ‹åˆ°è¯¥ç¨¿ä»¶è¿›å…¥â€œéœ€ä¿®æ”¹â€åˆ—ï¼›ç‚¹å‡»â€œæ‰¹å‡†â€åˆ™ä¼šè®©å…¶è¿›å…¥ `approved` çŠ¶æ€ä¾›æ’ç‰ˆä½¿ç”¨ã€‚

### â³ ä»å¾…å®Œå–„

| æ¨¡å— | ç¼ºå¤±å†…å®¹ |
| --- | --- |
| ç”¨ä¾‹è¦†ç›– | Issue é€‰æ‹©ã€æ’ç”»å¸ˆç•Œé¢ã€å¹¿å‘Šç®¡ç†ã€å°é¢åˆ¶ä½œã€æ•´åˆŠå®¡æ‰¹/å¯¼å‡ºç­‰æœªå®ç°ã€‚ |
| æ’ç‰ˆ | æ²¡æœ‰â€œä¿å­˜/åŠ è½½å¸ƒå±€â€API è°ƒç”¨ï¼Œæ’ç”»/å¹¿å‘Šæ•°æ®ä¸ºå ä½ï¼Œä¸æ”¯æŒå¤šé¡µã€‚ |
| åç«¯æ¥å£ | ç¼ºå°‘ Issueã€å¹¿å‘Šã€å¯¼å‡ºã€å®¡æ‰¹ç­‰æ§åˆ¶å™¨å’Œè·¯ç”±ï¼›æ— æµ‹è¯•/æ–‡æ¡£è¯´æ˜ã€‚ |
| DevOps | README ä»ä¸º CRA æ¨¡æ¿ï¼Œç¼ºå°‘æ•´ä½“å¯åŠ¨è¯´æ˜ã€ç¯å¢ƒå˜é‡ç¤ºä¾‹ã€æµ‹è¯•ç­–ç•¥ã€‚ |

## 5. å»ºè®®çš„ä¸‹ä¸€æ­¥

1. **æ‰“é€šè®¤è¯é“¾è·¯**ï¼šå®ç°æ³¨å†Œ/ç™»å½• UIï¼Œè°ƒç”¨ `/api/auth/*`ï¼Œåœ¨å‰ç«¯å­˜å‚¨ JWT å¹¶ç»Ÿä¸€å°è£…è¯·æ±‚ã€‚
2. **è¿ç§»æ–‡ç« æ•°æ®**ï¼šä»¥åç«¯ API ä¸ºå‡†åˆ™ï¼›ä½œè€…/æ ¡å¯¹çš„ä¿å­˜ã€æäº¤ã€é€€å›ã€æ‰¹å‡†æ“ä½œå…¨éƒ¨èµ° RESTã€‚
3. **æ‰©å±•ç”¨ä¾‹**ï¼šé€æ­¥å®ç° Issue å…³è”ã€æ’ç”»ä¸Šä¼ ï¼ˆå¯¹æ¥ `/api/illustrations`ï¼‰ã€å¹¿å‘Š/å°é¢/å¯¼å‡ºæ¨¡å—ã€‚
4. **å®Œå–„ç‰ˆé¢è®¾è®¡**ï¼šè°ƒç”¨ `/api/templates` å’Œ `/api/layouts` å®ç°æ¨¡æ¿é€‰æ‹©ã€å¸ƒå±€å­˜å‚¨ä¸å›å¡«ï¼Œè¡¥é½æ’ç”»/å¹¿å‘Šæ‹–æ‹½ã€‚
5. **æ–‡æ¡£ä¸æµ‹è¯•**ï¼šæ’°å†™ç»Ÿä¸€ READMEã€ç¯å¢ƒé…ç½®è¯´æ˜ï¼Œå¢åŠ å…³é”®æµç¨‹çš„å•å…ƒ/é›†æˆæµ‹è¯•ã€‚

## 6. è¿è¡ŒæŒ‡å—

### 6.1 å®‰è£…ä¾èµ–ï¼ˆåªéœ€æ‰§è¡Œä¸€æ¬¡ï¼‰

> âš ï¸ ä½ çš„ npm ç¯å¢ƒä¼šå¿½ç•¥ `--prefix`ï¼Œæ‰€ä»¥ä¸€å®šè¦ **è¿›å…¥å¯¹åº”å­ç›®å½•** åå†è¿è¡Œå‘½ä»¤ï¼Œå¦åˆ™å°±ä¼šå‡ºç° â€œF:\Software\Newspaper\package.json ä¸å­˜åœ¨â€ çš„ ENOENT æŠ¥é”™ã€‚

```powershell
# 1) å®‰è£…å‰ç«¯ä¾èµ–
cd F:\Software\Newspaper\newspaper
npm install

# 2) å®‰è£…åç«¯ä¾èµ–
cd F:\Software\Newspaper\newspaper_backend
npm install

# 3) å®Œæˆåå¯å›åˆ°æ ¹ç›®å½•
cd F:\Software\Newspaper
```

### 6.2 å¯åŠ¨æœåŠ¡ï¼ˆæ¨èä¸¤ä¸ªç»ˆç«¯ï¼‰

#### ç»ˆç«¯ 1ï¼šå¯åŠ¨åç«¯
```powershell
cd F:\Software\Newspaper\newspaper_backend
npm run dev     # çœ‹åˆ° "Server running on port 3001" ä»£è¡¨æˆåŠŸ
```

> å¦‚æœæç¤º `nodemon is not recognized`ï¼Œè¯´æ˜ `npm install` æœªæ‰§è¡ŒæˆåŠŸï¼›é‡è·‘ä¸€æ¬¡ `npm install`ï¼Œæˆ–ä¸´æ—¶ç”¨ `npx nodemon src/server.js`ã€‚

#### ç»ˆç«¯ 2ï¼šå¯åŠ¨å‰ç«¯
```powershell
cd F:\Software\Newspaper\newspaper
npm start                                # æµè§ˆå™¨è‡ªåŠ¨æ‰“å¼€ http://localhost:3000
```

> è‹¥å‡ºç° `react-scripts is not recognized`ï¼ŒåŒæ ·æ˜¯ä¾èµ–æœªè£…æˆ–å‘½ä»¤åœ¨é”™è¯¯ç›®å½•æ‰§è¡Œã€‚è¯·ç¡®è®¤ç¡®å®åœ¨ `newspaper` å­ç›®å½•å†…è¿è¡Œã€‚

### 6.3 é¦–æ¬¡æ•°æ®åˆå§‹åŒ–ï¼ˆå¯é€‰ï¼‰
```powershell
npm run init-users --prefix newspaper_backend
npm run init-templates --prefix newspaper_backend
```
è¿™ä¼šå‘ MongoDB æ’å…¥é»˜è®¤ç”¨æˆ·å’Œæ¨¡æ¿ã€‚

> è¯·ç¡®è®¤ `.env` ä¸­å·²é…ç½® `MONGODB_URI`ã€`JWT_SECRET` ç­‰åç«¯æ‰€éœ€å˜é‡ï¼Œå¹¶ä¿è¯ MongoDB æœåŠ¡å·²å¯åŠ¨ã€‚

## 7. ç›®å½•é€Ÿè§ˆ

```
Newspaper/
â”œâ”€ newspaper/               # React å‰ç«¯
â”‚  â”œâ”€ src/components        # è®¤è¯ã€å¸ƒå±€ç­‰ç»„ä»¶
â”‚  â”œâ”€ src/pages             # ä½œè€…/æ ¡å¯¹/ç‰ˆå¼å·¥ä½œå°
â”‚  â”œâ”€ src/contexts          # Auth & Article context
â”‚  â””â”€ src/data              # æ¨¡æ¿ã€ç”¨æˆ· mock
â”œâ”€ newspaper_backend/       # Express åç«¯
â”‚  â”œâ”€ src/models            # Article/User/Template/Layout ç­‰
â”‚  â”œâ”€ src/controllers       # ä¸šåŠ¡é€»è¾‘
â”‚  â”œâ”€ src/routes            # REST è·¯ç”±
â”‚  â””â”€ src/middleware        # JWTã€æ—¥å¿—ã€ä¸Šä¼ ç­‰
â””â”€ usecase.txt / Vision.pdf # éœ€æ±‚è¯´æ˜
```

## 8. æ³¨æ„äº‹é¡¹

- ç›®å‰ `.env`ã€æ•°æ®åº“ URIã€JWT å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯æœªéšä»“åº“åˆ†å‘ï¼Œè¯·åœ¨æœ¬åœ°è‡ªè¡Œç»´æŠ¤ã€‚
- æ–‡ç« ä¸å®¡æ ¸æ•°æ®å·²å®æ—¶åŒæ­¥è‡³åç«¯ï¼Œè¯·ç¡®ä¿æœ¬åœ° MongoDB ä¿æŒè¿è¡Œä»¥é¿å…è¯·æ±‚å¤±è´¥ã€‚
- æœ¬æ–‡æ¡£ä½œä¸ºå†…éƒ¨å‚è€ƒææ–™ï¼Œä¸éœ€è¦æäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚

## 9. å¿«é€Ÿè¿è¡ŒæŒ‡ä»¤

åœ¨ PowerShell ä¸­ä¾æ¬¡å¯åŠ¨åç«¯ä¸å‰ç«¯ï¼Œä¾¿å¯ä½“éªŒä¸Šè¿°åŠŸèƒ½ï¼ˆç¤ºä¾‹å‘½ä»¤ï¼‰ï¼š

```powershell
Start-Process powershell -ArgumentList '-NoExit','cd newspaper_backend; npm run dev'
Start-Sleep -Seconds 2
Start-Process powershell -ArgumentList '-NoExit','cd newspaper; npm start'
```

> è‹¥åªéœ€éªŒè¯å‰ç«¯ UIï¼Œå¯åœ¨åç«¯ç»ˆç«¯å·²å¯åŠ¨çš„å‰æä¸‹ç›´æ¥æ‰§è¡Œï¼š`npm start --prefix newspaper`


